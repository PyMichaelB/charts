# rabbitmq-queue-management

This repo contains a Helm chart to deploy a containersied version of the `https://github.com/gessnerfl/rabbitmq-queue-management` project.

It is inspired by the `bitnami` charts - and the description of parameters have been taken from bitnami charts with the README.md "Parameters" section generated by 
`https://github.com/bitnami-labs/readme-generator-for-helm`.
```
git clone https://github.com/bitnami-labs/readme-generator-for-helm
npm install ./readme-generator-for-helm
npx readme-generator --values values.yaml --readme README.md
```

## Parameters

### Global parameters

| Name                      | Description                                     | Value |
| ------------------------- | ----------------------------------------------- | ----- |
| `global.imageRegistry`    | Global Docker image registry                    | `""`  |
| `global.imagePullSecrets` | Global Docker registry secret names as an array | `[]`  |


### Common parameters

| Name                     | Description                                                                             | Value          |
| ------------------------ | --------------------------------------------------------------------------------------- | -------------- |
| `nameOverride`           | String to partially override common.names.fullname                                      | `""`           |
| `fullnameOverride`       | String to fully override common.names.fullname                                          | `""`           |
| `commonLabels`           | Labels to add to all deployed objects                                                   | `{}`           |
| `commonAnnotations`      | Annotations to add to all deployed objects                                              | `{}`           |
| `diagnosticMode.enabled` | Enable diagnostic mode (all probes will be disabled and the command will be overridden) | `false`        |
| `diagnosticMode.command` | Command to override all containers in the deployment                                    | `["sleep"]`    |
| `diagnosticMode.args`    | Args to override all containers in the deployment                                       | `["infinity"]` |


### Traffic Exposure Parameters

| Name                               | Description                                                                                                                      | Value                             |
| ---------------------------------- | -------------------------------------------------------------------------------------------------------------------------------- | --------------------------------- |
| `service.type`                     | ui and api service type                                                                                                          | `ClusterIP`                       |
| `service.ports`                    | List of service ports                                                                                                            | `[]`                              |
| `service.portNames.ui`             | UI service port name                                                                                                             | `http-ui`                         |
| `service.portNames.api`            | API service port name                                                                                                            | `http-api`                        |
| `service.clusterIP`                | service Cluster IP                                                                                                               | `""`                              |
| `service.loadBalancerIP`           | service Load Balancer IP                                                                                                         | `""`                              |
| `service.loadBalancerSourceRanges` | service Load Balancer sources                                                                                                    | `[]`                              |
| `service.externalTrafficPolicy`    | service external traffic policy                                                                                                  | `Cluster`                         |
| `service.annotations`              | Additional custom annotations for service                                                                                        | `{}`                              |
| `service.sessionAffinity`          | Session Affinity for Kubernetes service, can be "None" or "ClientIP"                                                             | `None`                            |
| `service.sessionAffinityConfig`    | Additional settings for the sessionAffinity                                                                                      | `{}`                              |
| `service.labels`                   | Additional custom labels for service                                                                                             | `{}`                              |
| `ingress.enabled`                  | Enable ingress record generation for rabbitmq-queue-management                                                                   | `false`                           |
| `ingress.pathType`                 | Ingress path type                                                                                                                | `ImplementationSpecific`          |
| `ingress.apiVersion`               | Force Ingress API version (automatically detected if not set)                                                                    | `""`                              |
| `ingress.ingressClassName`         | IngressClass that will be be used to implement the Ingress (Kubernetes 1.18+)                                                    | `""`                              |
| `ingress.hostname`                 | Default host for the ingress record                                                                                              | `rabbitmq-queue-management.local` |
| `ingress.path`                     | Default path for the ingress record                                                                                              | `/`                               |
| `ingress.annotations`              | Additional annotations for the Ingress resource. To enable certificate autogeneration, place here your cert-manager annotations. | `{}`                              |
| `ingress.tls.enabled`              | Enable TLS configuration for the host defined at `ingress.hostname` parameter                                                    | `false`                           |
| `ingress.tls.secretName`           | The name of TLS certificates to be retrieved                                                                                     | `""`                              |
| `ingress.selfSigned`               | Create a TLS secret for this ingress record using self-signed certificates generated by Helm                                     | `false`                           |
| `ingress.extraHosts`               | An array with additional hostname(s) to be covered with the ingress record                                                       | `[]`                              |
| `ingress.extraPaths`               | An array with additional arbitrary paths that may need to be added to the ingress under the main host                            | `[]`                              |
| `ingress.extraTls`                 | TLS configuration for additional hostname(s) to be covered with this ingress record                                              | `[]`                              |


### rabbitmq-queue-management image parameters

| Name                | Description                                                                                                               | Value                       |
| ------------------- | ------------------------------------------------------------------------------------------------------------------------- | --------------------------- |
| `image.registry`    | rabbitmq-queue-management image registry                                                                                  | `pymichaelb`                |
| `image.repository`  | rabbitmq-queue-management image repository                                                                                | `rabbitmq-queue-management` |
| `image.tag`         | rabbitmq-queue-management image tag (immutable tags are recommended)                                                      | `1.2.0`                     |
| `image.digest`      | rabbitmq-queue-management image digest in the way sha256:aa.... Please note this parameter, if set, will override the tag | `""`                        |
| `image.pullPolicy`  | rabbitmq-queue-management image pull policy                                                                               | `IfNotPresent`              |
| `image.pullSecrets` | rabbitmq-queue-management image pull secrets                                                                              | `[]`                        |
| `image.debug`       | Specify if debug values should be set                                                                                     | `false`                     |


### rabbitmq-queue-management deployment parameters

| Name                                    | Description                                                                                                                     | Value                                                        |
| --------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------ |
| `replicaCount`                          | Number of rabbitmq-queue-management replicas to deploy                                                                          | `1`                                                          |
| `resources.limits`                      | The resources limits for the rabbitmq-queue-management containers                                                               | `{}`                                                         |
| `resources.requests`                    | The requested memory and cpu for the rabbitmq-queue-management containers                                                       | `{}`                                                         |
| `podSecurityContext.enabled`            | Enabled rabbitmq-queue-management pods' Security Context                                                                        | `true`                                                       |
| `podSecurityContext.fsGroup`            | Set rabbitmq-queue-management pod's Security Context fsGroup                                                                    | `10000`                                                      |
| `containerSecurityContext.enabled`      | Enabled rabbitmq-queue-management containers' Security Context                                                                  | `true`                                                       |
| `containerSecurityContext.runAsUser`    | Set rabbitmq-queue-management container's Security Context runAsUser                                                            | `10000`                                                      |
| `containerSecurityContext.runAsNonRoot` | Set rabbitmq-queue-management container's Security Context runAsNonRoot                                                         | `true`                                                       |
| `command`                               | Override default container command (useful when using custom images)                                                            | `[]`                                                         |
| `args`                                  | Override default container args (useful when using custom images)                                                               | `["-Dspring.config.location=/home/spring/application.yaml"]` |
| `hostAliases`                           | rabbitmq-queue-management pod host aliases                                                                                      | `[]`                                                         |
| `podLabels`                             | Extra labels for rabbitmq-queue-management pods                                                                                 | `{}`                                                         |
| `podAnnotations`                        | Annotations for rabbitmq-queue-management pods                                                                                  | `{}`                                                         |
| `podAffinityPreset`                     | Pod affinity preset. Ignored if `affinity` is set. Allowed values: `soft` or `hard`                                             | `""`                                                         |
| `podAntiAffinityPreset`                 | Pod anti-affinity preset. Ignored if `affinity` is set. Allowed values: `soft` or `hard`                                        | `soft`                                                       |
| `nodeAffinityPreset.type`               | Node affinity preset type. Ignored if `affinity` is set. Allowed values: `soft` or `hard`                                       | `""`                                                         |
| `nodeAffinityPreset.key`                | Node label key to match. Ignored if `affinity` is set                                                                           | `""`                                                         |
| `nodeAffinityPreset.values`             | Node label values to match. Ignored if `affinity` is set                                                                        | `[]`                                                         |
| `containerPorts`                        | rabbitmq-queue-management container ports                                                                                       | `[]`                                                         |
| `affinity`                              | Affinity for pod assignment                                                                                                     | `{}`                                                         |
| `nodeSelector`                          | Node labels for pod assignment                                                                                                  | `{}`                                                         |
| `tolerations`                           | Tolerations for pod assignment                                                                                                  | `[]`                                                         |
| `schedulerName`                         | Alternate scheduler                                                                                                             | `""`                                                         |
| `topologySpreadConstraints`             | Topology Spread Constraints for pod assignment spread across your cluster among failure-domains. Evaluated as a template        | `[]`                                                         |
| `updateStrategy.type`                   | rabbitmq-queue-management deployment strategy type                                                                              | `RollingUpdate`                                              |
| `updateStrategy.rollingUpdate`          | rabbitmq-queue-management deployment rolling update configuration parameters                                                    | `{}`                                                         |
| `priorityClassName`                     | Name of the existing priority class to be used by rabbitmq-queue-management pods, priority class needs to be created beforehand | `""`                                                         |
| `extraEnvVars`                          | Array with extra environment variables to add to the rabbitmq-queue-management container                                        | `[]`                                                         |
| `extraEnvVarsCM`                        | Name of existing ConfigMap containing extra env vars                                                                            | `""`                                                         |
| `extraEnvVarsSecret`                    | Name of existing Secret containing extra env vars                                                                               | `""`                                                         |
| `extraVolumes`                          | Optionally specify extra list of additional volumes for rabbitmq-queue-management pods                                          | `[]`                                                         |
| `extraVolumeMounts`                     | Optionally specify extra list of additional volumeMounts for rabbitmq-queue-management container(s)                             | `[]`                                                         |
| `sidecars`                              | Add additional sidecar containers to the rabbitmq-queue-management pod                                                          | `[]`                                                         |
| `initContainers`                        | Add additional init containers to the rabbitmq-queue-management pods                                                            | `[]`                                                         |


### Other Parameters

| Name                                          | Description                                                            | Value  |
| --------------------------------------------- | ---------------------------------------------------------------------- | ------ |
| `serviceAccount.create`                       | Enable creation of ServiceAccount for rabbitmq-queue-management pod    | `true` |
| `serviceAccount.name`                         | The name of the ServiceAccount to use.                                 | `""`   |
| `serviceAccount.automountServiceAccountToken` | Allows auto mount of ServiceAccountToken on the serviceAccount created | `true` |
| `serviceAccount.annotations`                  | Additional custom annotations for the ServiceAccount                   | `{}`   |

